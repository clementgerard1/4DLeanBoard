import TimelineUtils from "../Utils/V_timelineUtils.class.js";
import V_socketUtils from "../Utils/V_socketUtils.class.js";
import V_taskTableUtils from "../Utils/V_taskTableUtils.class.js";
import Utils from "../../class/Utils.class.js";
import CheckList from "./assets/CheckList.svg";
import Schedule from "./assets/Schedule.svg";
import AdminSettingsMale from "./assets/AdminSettingsMale.svg";
import "./V_6Wrow_line.scss";

export default {
	data : function(){
		return {
			"checklisticon" : CheckList,
			"admin" : AdminSettingsMale,
			"schedule" : Schedule,
			"leaderName" : this.team.getLeader().name,
			"leaderEmail" : this.team.getLeader().email,
			"leaderPhone" : this.team.getLeader().phone,
			"dates" : this.timeline.getStartEndDateByTeam(this.team),
		}
	},
	props: [
		"team",
		"teamdescription",
		"time",
		"nth"
	],
	methods: {
		handleTap : function(){
			//this.setTeamDisplay(this.team.getId(), this.nth, !this.$parent.teamDescription);
			V_socketUtils.setTeamDisplay(this.team.getId(), this.nth, !this.$parent.teamDescription);
		},
		setTeamDisplay : function(teamId, nth, bool){
			if(this.team.getId() == teamId && this.nth == nth){
				this.$parent.teamDescription = bool;
			}
		}
	},
	inject : [
		'timeline',
		'model',
	],
	created : function(){
		V_taskTableUtils.addLine(this);
		this.setTeamDisplay(this.team.getId(), this.nth, V_taskTableUtils.getInfosLine(this.team.getId(), this.nth));
	},
	computed : {
		doneStatus : function(){
			return this.timeline.getNbTaskDoneByTeamAndTime(this.team, this.time * 7);
		}
	},
	template : `

		<div class="teamLine">
			<div class="teamAbr" v-tap="handleTap">
				<p v-html="team.getAbr()"></p>
			</div>
			<div v-if="teamdescription" class="teamDescription">
				<p class="teamName" v-html="team.getName()" ></p>
				<div class="teamIcon" v-html="checklisticon"></div>
				<p class="doneStatus" v-html="doneStatus"></p>
				<div class="teamIcon" v-html="schedule"></div>
				<p class="teamDates" v-html="dates"></p>
				<div class="manIcon" v-html="admin"></div>
				<p class="leaderName" v-html="leaderName"></p>
				<p class="leaderEmail" v-html="leaderEmail"></p>
				<p class="leaderPhone" v-html="leaderPhone"></p>
			</div>
		</div>

	`,
}